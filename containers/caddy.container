[Unit]
Description=Caddy quadlet
After=network-online.target

[Container]
Image=caddy.build
AutoUpdate=registry
PublishPort=80:80
PublishPort=443:443
PublishPort=443:443/udp
UserNS=keep-id
Volume=/etc/Caddy/Caddyfile:/etc/caddy/Caddyfile:ro
Volume=/etc/Caddy/www:/www:ro
Volume=/var/lib/Caddy/data:/data:Z
Volume=/etc/Caddy/config:/config:Z
Timezone=US/Pacific
Pull=newer

[Service]
StateDirectory=Caddy/data
ConfigurationDirectory=Caddy/config Caddy/www
Restart=always
RestartSec=30

[Install]
# Start by default on boot
WantedBy=multi-user.target